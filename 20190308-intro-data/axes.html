<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
  </head>
  <body>

<svg id="graph"></svg>
  
<script src="https://d3js.org/d3.v5.min.js"></script>
<script>
const WIDTH = window.innerWidth * 0.9
const HEIGHT = WIDTH / 3
const MARGIN = 5
const DATA = [
  { nom: 'Lausanne', population: 138905 },
  { nom: 'Yverdon-les-Bains', population: 30143 },
  { nom: 'Montreux', population: 26574 },
  { nom: 'Renens', population: 21036 },
  { nom: 'Nyon', population: 20533 },
  { nom: 'Vevey', population: 19827 },
]
const BAR_SPACE = WIDTH / DATA.length
const BAR_WIDTH = BAR_SPACE - MARGIN

// l'élément <svg>
const svg = d3.select('#graph')
  .attr('width', WIDTH)
  .attr('height', HEIGHT)

// un élément <g> pour les bâtons
const barsGroup = svg.append('g')

// l'échelle pour la hauteur
const heightScale = d3.scaleLinear()
  .domain([0, d3.max(DATA, d => d.population)])
  .range([0, HEIGHT])

// les bâtons
barsGroup.selectAll('rect') // rects qui n'existent pas encore
  .data(DATA) // joindre les données
  .enter() // quand une donnée entre
    .append('rect') // créer un bâton
    .attr('x', (d, i) =>  i * BAR_SPACE)
    .attr('width', BAR_WIDTH)
    .attr('y', d => HEIGHT - heightScale(d.population))
    .attr('height', d => heightScale(d.population))

</script>
  </body>
</html>